(function(){var a;a=function(){function a(){}return a.prototype.getServer=function(){return"http://www.like-btn.com"},a.prototype.setCookie=function(a,b){return a&&b?document.cookie=""+a+"="+encodeURIComponent(b)+" ;path=/; expires=Thu, 15 Oct 2099 00:00:00 GMT":void 0},a.prototype.getCookie=function(a){return decodeURIComponent((document.cookie.match(new RegExp("\b?"+a.replace(/([^\s\w])/g,"\\$1")+"=(.*?)(?:;|$)","i"))||[null,""])[1])},a.prototype.getHttpRequest=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},a.prototype.updateWrapper=function(a,b){var c,d,e;if(b&&b.user){for(;a.firstChild;)a.removeChild(a.firstChild);return e=document.createElement("span"),e.className="like-button",d=a.getAttribute("like-btn"),e.innerHTML=d?d:"like",b.liked?(e.className+=" liked",a.style.cursor="default"):(e.addEventListener("click",function(b){return function(){return b.like(a)}}(this)),a.style.cursor="pointer"),a.appendChild(e),c=document.createElement("span"),c.className="like-count",c.innerHTML="("+b.count+")",a.appendChild(c),this.setCookie("_like_u",b.user)}return console.error("error result")},a.prototype.getParams=function(a){var b,c,d,e;return e="",e+="shortname="+a.getAttribute("like-shortname"),e+="&identifier="+encodeURIComponent(a.getAttribute("like-identifier")),b=this.getCookie("_like_u"),b&&(e+="&user="+b),d=a.getAttribute("like-name"),d&&(e+="&name="+encodeURIComponent(d)),c=a.getAttribute("like-link"),c&&(e+="&link="+encodeURIComponent(c)),e},a.prototype.request=function(a,b,c){var d,e,f;return e=this.getHttpRequest(),e.onreadystatechange=function(b){return function(){return 4===e.readyState&&200===e.status?b.updateWrapper(a,JSON.parse(e.responseText)):void 0}}(this),f=this.getServer()+c,d=this.getParams(a),"GET"===b&&(f+="?"+d),e.open(b,f,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("POST"===b?d:null)},a.prototype.like=function(a){return this.request(a,"POST","/v1/like")},a.prototype.count=function(a){return this.request(a,"GET","/v1/like_count")},a.prototype.init=function(){var a,b,c,d,e;for(d=document.querySelectorAll(".like-wrapper"),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.count(a));return e},a}(),(new a).init()}).call(this);